# SQLとデータベース

## SQLとは

SQL(Structured Query Language)は、データベースで使用される標準的なプログラミング言語で、データの操作、検索、管理、変更に使用されます。データベース製品や規格による違いなどもありますが、多くの部分は共通でいろいろなプログラム言語から呼び出すことができます。記法も簡潔で様々なところで利用されていることから、一度覚えれば幅広く活用することができます。

## データベースの概要

データベースは一般にテーブルと呼ばれる二次元のデータ構造で、各列に定義されたデータ型(int,floatなど)で情報を格納します。複雑なデータ型の場合は複数のテーブルの関係性によりデータを格納することから、リレーショナルデータベースとも呼ばれます。

近年は階層構造など二次元の表とは異なるデータモデルを使用してデータに合わせて効率的にを格納・管理するデータベースでNoSQL（Not only SQL）と呼ばれるデータベースも増えていますが、これらの製品でも基本操作はSQLをベースにしていることが多いです。

## 規格と方言

SQLはANSI（American National Standards Institute）によって標準化されました。基準とするANSIのバージョンやデータベース製品独自の関数や機能により、若干の違いがあることがあります。

**データベース製品の種類**

### 有償系

- Oracle
- Microsoft SQL Server
- Microsoft Access

### オープンソース系(利用は無償で可)

- MySQL
- PostgreSQL
- MongoDB
- Redis
- SQLite
    
    SQLiteは、オープンソースのリレーショナルデータベース管理システムです。
    
    軽量で使いやすく、多くのプログラム言語で使用可能です。
    
    サーバーが不要で単一のファイルにデータを格納することができるため、導入が容易で簡単にバックアップも作成できます。
    

## 基本用語

SASの用語との対応配下のようになります。

|  SAS 用語 | SQL 用語 |
| --- | --- |
| データセット | テーブル |
| オブザベーション | 行,レコード |
| 変数 | 列,フィールド |

**クエリ・文(statement)と句(clause)**

クエリ・文は複数の句を含む指示のまとまりです。句はSELECT区やWERER句などがあり、文ではSELECT文はありますが、WHERE文はありません。

**キー**

データベースのテーブル内の列を識別するための一意の値を持つ列です。キーは、以下のような種類があります。

- 主キー（Primary Key）: テーブル内の各行を一意に識別するための列です。主キーは、NULL値を持つことができず、一意性が保証されています。
- 外部キー（Foreign Key）: 他のテーブルの主キーを参照する列で、関連するテーブル間でデータの整合性を保つために使用されます。
- 一意キー（Unique Key）: 主キーと同様に、テーブル内の各行を一意に識別するための列ですが、NULL値を持つことができます。

**インデックス**

インデックスは、データベースのテーブル内の特定の列に対して作成されるデータ構造で、クエリの実行速度を向上させることができます。インデックスを使用することで、全ての行を走査することなく、特定の行にアクセスすることができます。ただしインデックスの作成や管理が必要なため必要とされるパフォーマンスなどから必要性を検討して利用することをおすすめします。

**ビュー**

データベースのテーブルから選択された列や行、あるいは複数のテーブルを結合した結果を表示する仮想テーブルです。ビューは実際のデータを格納していないため、保存スペースを節約できます。ビューは元のテーブルには手を加えずに、クエリを簡略化したり権限により特定の列を隠すなどに利用されます。参照のたびに元のテーブルから取得するため、パフォーマンスが重要で繰り返し参照するような場合は不利になることもあります。